
FIND_PACKAGE(SharedLib REQUIRED)

#MESSAGE(STATUS "SharedLib_INCLUDE_DIRS: " ${SharedLib_INCLUDE_DIRS})
#MESSAGE(STATUS "SharedLib_LIBRARIES: " ${SharedLib_LIBRARIES})
MESSAGE(STATUS "SharedLib_LOCATION: " ${SharedLib_LOCATION})
#MESSAGE(STATUS "SharedLib_DIR: " ${SharedLib_DIR})

ADD_SUBDIRECTORY(App)

ADD_EXECUTABLE(app
  ${app_src}
  ${app_hdr}
)

TARGET_LINK_LIBRARIES(app PUBLIC SharedLib)

ADD_CUSTOM_COMMAND(TARGET app
          #PRE_BUILD
		  POST_BUILD
          #COMMAND ${CMAKE_COMMAND} -E make_directory ${BUILD_DIR}
          COMMAND ${CMAKE_COMMAND} -E copy ${SharedLib_LOCATION} ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_CONFIGURATION_TYPES}
)


INSTALL(TARGETS app RUNTIME DESTINATION install)
INSTALL(FILES ${SharedLib_LOCATION} DESTINATION install)